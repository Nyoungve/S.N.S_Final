<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="restaurant">

<select id="selectRestaurantInfo" parameterType="string" resultType="sns.dto.RestaurantDTO">
	select * from restaurant where restaurant_number=#{restaurant_number}
</select>

<select id="RestaurantList" parameterType="string" resultType="sns.dto.RestaurantDTO">
select * from restaurant where userid=#{userid}
</select>

<select id="getRestaurants" parameterType="java.util.List" resultType="sns.dto.RestaurantDTO">

select *
from restaurant
where restaurant_number in

<foreach item="item" index="index" collection="list"
open="(" separator="," close=")">
#{item}
</foreach>

</select>



<select id="mainRestaurantList" resultType="sns.dto.RestaurantDTO">

select *
from restaurant R join 
(
select restaurant_number, substr(m_path, instr(m_path,'\', -1,1) +1) as m_path
from restaurantupload
)T
on R.restaurant_number = T.restaurant_number


</select>

<insert id="insertRestaurantForm" parameterType="sns.dto.RestaurantDTO">

insert into restaurant values(#{restaurant_number},#{e_name},#{address},#{teamCount},#{type},#{pay_key},#{r_info},#{r_time},#{openingTime},#{closingTime},#{zipcode})


</insert>


</mapper>
